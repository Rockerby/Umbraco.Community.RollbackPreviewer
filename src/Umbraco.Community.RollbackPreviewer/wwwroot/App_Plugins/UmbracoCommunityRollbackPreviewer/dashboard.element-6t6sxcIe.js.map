{"version":3,"file":"dashboard.element-6t6sxcIe.js","sources":["../../../Client/src/dashboards/dashboard.element.ts"],"sourcesContent":["import { LitElement, css, html, customElement, state } from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\nimport { YourPackageNameService, UserModel } from \"../api\";\nimport { UUIButtonElement } from \"@umbraco-cms/backoffice/external/uui\";\nimport { UMB_NOTIFICATION_CONTEXT, UmbNotificationContext } from \"@umbraco-cms/backoffice/notification\";\nimport { UMB_CURRENT_USER_CONTEXT, UmbCurrentUserModel } from \"@umbraco-cms/backoffice/current-user\";\n\n@customElement('example-dashboard')\nexport class ExampleDashboardElement extends UmbElementMixin(LitElement) {\n\n  @state()\n  private _yourName: string | undefined = \"Press the button!\";\n\n  @state()\n  private _timeFromMrWolf: Date | undefined;\n\n  @state()\n  private _serverUserData: UserModel | undefined = undefined;\n\n  @state()\n  private _contextCurrentUser: UmbCurrentUserModel | undefined = undefined;\n\n  constructor() {\n    super();\n\n    this.consumeContext(UMB_NOTIFICATION_CONTEXT, (notificationContext) => {\n      this.#notificationContext = notificationContext;\n    });\n\n    this.consumeContext(UMB_CURRENT_USER_CONTEXT, (currentUserContext) => {\n\n      // When we have the current user context\n      // We can observe properties from it, such as the current user or perhaps just individual properties\n      // When the currentUser object changes we will get notified and can reset the @state properrty\n      this.observe(currentUserContext.currentUser, (currentUser) => {\n        this._contextCurrentUser = currentUser;\n      });\n    });\n  }\n\n  #notificationContext: UmbNotificationContext | undefined = undefined;\n\n  #onClickWhoAmI = async (ev: Event) => {\n    const buttonElement = ev.target as UUIButtonElement;\n    buttonElement.state = \"waiting\";\n\n    const { data, error } = await YourPackageNameService.whoAmI();\n\n    if (error) {\n      buttonElement.state = \"failed\";\n      console.error(error);\n      return;\n    }\n\n    if (data !== undefined) {\n      this._serverUserData = data;\n      buttonElement.state = \"success\";\n    }\n\n    if (this.#notificationContext) {\n      this.#notificationContext.peek(\"warning\", {\n        data: {\n          headline: `You are ${this._serverUserData?.name}`,\n          message: `Your email is ${this._serverUserData?.email}`,\n        }\n      })\n    }\n  }\n\n  #onClickWhatsTheTimeMrWolf = async (ev: Event) => {\n    const buttonElement = ev.target as UUIButtonElement;\n    buttonElement.state = \"waiting\";\n\n    // Getting a string - should I expect a datetime?!\n    const { data, error } = await YourPackageNameService.whatsTheTimeMrWolf();\n\n    if (error) {\n      buttonElement.state = \"failed\";\n      console.error(error);\n      return;\n    }\n\n    if (data !== undefined) {\n      this._timeFromMrWolf = new Date(data);\n      buttonElement.state = \"success\";\n    }\n  }\n\n  #onClickWhatsMyName = async (ev: Event) => {\n    const buttonElement = ev.target as UUIButtonElement;\n    buttonElement.state = \"waiting\";\n\n    const { data, error } = await YourPackageNameService.whatsMyName();\n\n    if (error) {\n      buttonElement.state = \"failed\";\n      console.error(error);\n      return;\n    }\n\n    this._yourName = data;\n    buttonElement.state = \"success\";\n  }\n\n  render() {\n    return html`\n        <uui-box headline=\"Who am I?\">\n            <div slot=\"header\">[Server]</div>\n            <h2><uui-icon name=\"icon-user\"></uui-icon>${this._serverUserData?.email ? this._serverUserData.email : 'Press the button!'}</h2>\n            <ul>\n                ${this._serverUserData?.groups.map(group => html`<li>${group.name}</li>`)}\n            </ul>\n            <uui-button color=\"default\" look=\"primary\" @click=\"${this.#onClickWhoAmI}\">\n                Who am I?\n            </uui-button>\n            <p>This endpoint gets your current user from the server and displays your email and list of user groups.\n            It also displays a Notification with your details.</p>\n        </uui-box>\n\n        <uui-box headline=\"What's my Name?\">\n            <div slot=\"header\">[Server]</div>\n            <h2><uui-icon name=\"icon-user\"></uui-icon> ${this._yourName }</h2>\n            <uui-button color=\"default\" look=\"primary\" @click=\"${this.#onClickWhatsMyName}\">\n                Whats my name?\n            </uui-button>\n            <p>This endpoint has a forced delay to show the button 'waiting' state for a few seconds before completing the request.</p>\n        </uui-box>\n\n        <uui-box headline=\"What's the Time?\">\n            <div slot=\"header\">[Server]</div>\n            <h2><uui-icon name=\"icon-alarm-clock\"></uui-icon> ${this._timeFromMrWolf ? this._timeFromMrWolf.toLocaleString() : 'Press the button!'}</h2>\n            <uui-button color=\"default\" look=\"primary\" @click=\"${this.#onClickWhatsTheTimeMrWolf}\">\n                Whats the time Mr Wolf?\n            </uui-button>\n            <p>This endpoint gets the current date and time from the server.</p>\n        </uui-box>\n\n        <uui-box headline=\"Who am I?\" class=\"wide\">\n          <div slot=\"header\">[Context]</div>\n          <p>Current user email: <b>${this._contextCurrentUser?.email}</b></p>\n          <p>This is the JSON object available by consuming the 'UMB_CURRENT_USER_CONTEXT' context:</p>\n          <umb-code-block language=\"json\" copy>${JSON.stringify(this._contextCurrentUser, null, 2)}</umb-code-block>\n        </uui-box>\n    `;\n  }\n\n  static styles = [\n    css`\n            :host {\n                display: grid;\n                gap: var(--uui-size-layout-1);\n                padding: var(--uui-size-layout-1);\n                grid-template-columns: 1fr 1fr 1fr;\n            }\n\n            uui-box {\n                margin-bottom: var(--uui-size-layout-1);\n            }\n\n            h2 {\n                margin-top:0;\n            }\n\n            .wide {\n                grid-column: span 3;\n            }\n    `];\n}\n\nexport default ExampleDashboardElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'example-dashboard': ExampleDashboardElement;\n  }\n}\n"],"names":["_notificationContext","_onClickWhoAmI","_onClickWhatsTheTimeMrWolf","_onClickWhatsMyName","ExampleDashboardElement","UmbElementMixin","LitElement","__privateAdd","ev","buttonElement","data","error","YourPackageNameService","__privateGet","_a","_b","UMB_NOTIFICATION_CONTEXT","notificationContext","__privateSet","UMB_CURRENT_USER_CONTEXT","currentUserContext","currentUser","html","group","_c","css","__decorateClass","state","customElement","ExampleDashboardElement$1"],"mappings":"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"}